/********************************************************
*                                                       *
*   Copyright (C) Microsoft. All rights reserved.       *
*                                                       *
********************************************************/
"use strict";

var plugman = require('plugman'),
    optimist = require('optimist'),
    path = require('path'),
    util = require('./lib/util'),
    res = require('./lib/resources');

var argv = optimist.argv;
var projectSourceDir = argv.projectSourceDir;
var action = argv.action;  // 'install'
var pluginName = argv.pluginName;
var language = argv.language;

res.init(language);

if (action == 'install') {
    var pluginDirectory = path.join(projectSourceDir, 'plugins');
    util.createDirectoryIfNecessary(pluginDirectory);
    process.chdir(pluginDirectory);

    var p = plugman.raw.fetch(pluginName, pluginDirectory);
    // plugman.raw.fetch returns a Q promise.
    // Any handling that might come in the future would be of the form:
    //   p.then(function (createdPluginDirectory) { });
}
