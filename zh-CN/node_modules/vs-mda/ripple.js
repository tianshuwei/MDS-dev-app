/********************************************************
*                                                       *
*   Copyright (C) Microsoft. All rights reserved.       *
*                                                       *
********************************************************/
"use strict";

var r = require('ripple-emulator'),
    path = require('path'),
    fs = require('fs');

var opts = {
    path: [process.argv[2]]
};

if (process.argv[3]) {
    opts.port = process.argv[3];
}

var app = r.emulate.start(opts);

app.use('/___vs_to_ripple___', function(req, res) {
    var vsToRippleHtml = fs.readFileSync(path.join(__dirname, 'vs_to_ripple.html'));
    res.set({ 'Content-Type': 'text/html' });
    res.send(200, vsToRippleHtml);
});
